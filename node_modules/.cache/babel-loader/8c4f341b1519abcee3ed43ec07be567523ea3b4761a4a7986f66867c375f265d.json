{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP - PC\\\\Documents\\\\rfp_tec\\\\rpf_website_Tec\\\\metro_\\\\src\\\\Browserfp.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport './Browserfp.css';\nimport { useLanguage } from './LanguageContext';\nimport { translations } from './translations';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BrowseRFPs = () => {\n  _s();\n  const {\n    language\n  } = useLanguage();\n  const t = translations[language];\n  const [rfps, setRfps] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [activeFilter, setActiveFilter] = useState('recent');\n  const [sortKey] = useState('uploadedAt');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [editingRfp, setEditingRfp] = useState(null);\n  const [editForm, setEditForm] = useState({});\n  const loadRfps = async (tab = \"recent\", sort = \"uploadedAt\") => {\n    setLoading(true);\n    setError(null);\n    try {\n      const url = new URL(\"http://localhost:4000/api/rfps\");\n      url.searchParams.set(\"tab\", tab);\n      url.searchParams.set(\"sort\", sort);\n      const res = await fetch(url);\n      const items = await res.json();\n      setRfps(items);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    loadRfps(activeFilter, sortKey);\n  }, [activeFilter, sortKey]);\n  const handleSearchChange = event => {\n    setSearchTerm(event.target.value);\n  };\n  const handleDeleteRfp = async rfpId => {\n    if (!window.confirm('Are you sure you want to delete this RFP?')) {\n      return;\n    }\n    try {\n      console.log('Attempting to delete RFP with ID:', rfpId);\n      const response = await fetch(`http://localhost:4000/api/rfps/${rfpId}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      console.log('Response status:', response.status);\n      console.log('Response headers:', response.headers);\n\n      // Check if response is JSON before parsing\n      const contentType = response.headers.get('content-type');\n      if (!contentType || !contentType.includes('application/json')) {\n        const responseText = await response.text();\n        console.log('Response is not JSON:', responseText);\n        throw new Error(`Server returned non-JSON response. Status: ${response.status}, Content-Type: ${contentType}. Response: ${responseText.substring(0, 200)}...`);\n      }\n      const data = await response.json();\n      console.log('Response data:', data);\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to delete RFP');\n      }\n\n      // Refresh the RFP list\n      loadRfps(activeFilter, sortKey);\n    } catch (error) {\n      console.error('Error deleting RFP:', error);\n      alert(`Failed to delete RFP: ${error.message}`);\n    }\n  };\n  const handleEditRfp = rfp => {\n    setEditingRfp(rfp._id);\n    setEditForm({\n      projectName: rfp.projectName,\n      productSummary: rfp.productSummary,\n      deadline: new Date(rfp.deadline).toISOString().split('T')[0],\n      durationDays: rfp.durationDays,\n      status: rfp.status\n    });\n  };\n  const handleSaveRfp = async rfpId => {\n    try {\n      const response = await fetch(`http://localhost:4000/api/rfps/${rfpId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(editForm)\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to update RFP');\n      }\n\n      // Refresh the RFP list\n      loadRfps(activeFilter, sortKey);\n      setEditingRfp(null);\n      setEditForm({});\n    } catch (error) {\n      console.error('Error updating RFP:', error);\n      alert(`Failed to update RFP: ${error.message}`);\n    }\n  };\n  const handleCancelEdit = () => {\n    setEditingRfp(null);\n    setEditForm({});\n  };\n  const handleEditFormChange = (field, value) => {\n    setEditForm(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const testConnection = async () => {\n    try {\n      console.log('Testing connection...');\n\n      // First test a simple GET request\n      console.log('Testing GET /health...');\n      const getResponse = await fetch('http://localhost:4000/health', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      console.log('GET response status:', getResponse.status);\n      console.log('GET response headers:', getResponse.headers);\n      const getContentType = getResponse.headers.get('content-type');\n      if (!getContentType || !getContentType.includes('application/json')) {\n        const getResponseText = await getResponse.text();\n        console.log('GET response is not JSON:', getResponseText);\n        throw new Error(`GET request failed. Status: ${getResponse.status}, Content-Type: ${getContentType}. Response: ${getResponseText.substring(0, 200)}...`);\n      }\n      const getData = await getResponse.json();\n      console.log('GET response data:', getData);\n\n      // Now test the DELETE request\n      console.log('Testing DELETE /test-delete/123...');\n      const response = await fetch('http://localhost:4000/test-delete/123', {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      console.log('Test response status:', response.status);\n      const data = await response.json();\n      console.log('Test response data:', data);\n      alert('Connection test successful! Check console for details.');\n    } catch (error) {\n      console.error('Test connection failed:', error);\n      alert(`Test connection failed: ${error.message}`);\n    }\n  };\n  const filteredRfps = rfps.filter(rfp => {\n    const searchTermLower = searchTerm.toLowerCase();\n    const matchesSearch = searchTerm === '' || rfp.projectName.toLowerCase().includes(searchTermLower) || rfp.productSummary.toLowerCase().includes(searchTermLower) || rfp.status.toLowerCase().includes(searchTermLower);\n    return matchesSearch;\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"browse-rfp-app\",\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"browse-main\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: t.searchPlaceholder,\n            value: searchTerm,\n            onChange: handleSearchChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-tabs\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveFilter('recent'),\n            className: activeFilter === 'recent' ? 'active' : '',\n            children: t.recentlyUploaded\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveFilter('completed'),\n            className: activeFilter === 'completed' ? 'active' : '',\n            children: t.deadlineCompleted\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveFilter('extended'),\n            className: activeFilter === 'extended' ? 'active' : '',\n            children: t.extendedRFPs\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rfp-grid\",\n        children: [loading && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 33\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Error: \", error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 31\n        }, this), !loading && !error && filteredRfps.map(rfp => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `rfp-card ${rfp.status.toLowerCase()}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleEditRfp(rfp),\n              className: \"edit-btn-header\",\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: t.projectName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"header-right\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: `status-badge ${rfp.status.toLowerCase()}`,\n                children: rfp.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDeleteRfp(rfp._id),\n                className: \"delete-btn-header\",\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 29\n          }, this), editingRfp === rfp._id ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"edit-mode\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Project Name:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: editForm.projectName,\n                onChange: e => handleEditFormChange('projectName', e.target.value),\n                className: \"edit-input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Product Summary:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: editForm.productSummary,\n                onChange: e => handleEditFormChange('productSummary', e.target.value),\n                className: \"edit-textarea\",\n                rows: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Deadline:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  value: editForm.deadline,\n                  onChange: e => handleEditFormChange('deadline', e.target.value),\n                  className: \"edit-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Duration (days):\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: editForm.durationDays,\n                  onChange: e => handleEditFormChange('durationDays', e.target.value),\n                  className: \"edit-input\",\n                  min: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Status:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: editForm.status,\n                  onChange: e => handleEditFormChange('status', e.target.value),\n                  className: \"edit-select\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"open\",\n                    children: \"Open\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"extended\",\n                    children: \"Extended\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"closed\",\n                    children: \"Closed\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 274,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleSaveRfp(rfp._id),\n                className: \"save-btn\",\n                children: \"Save\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleCancelEdit,\n                className: \"cancel-btn\",\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 33\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: rfp.projectName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: t.productRequirementSummary\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: rfp.productSummary\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"key-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: t.keyInfo\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-grid\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"Deadline: \", new Date(rfp.deadline).toLocaleDateString('en-US', {\n                      month: 'short',\n                      day: 'numeric',\n                      year: 'numeric'\n                    })]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 303,\n                    columnNumber: 50\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [t.projectDuration, \":\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 308,\n                    columnNumber: 50\n                  }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: [rfp.durationDays, \" days\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 308,\n                    columnNumber: 83\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-actions\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => window.open(`http://localhost:4000${rfp.fileUrl}`, '_blank'),\n                className: \"preview-doc\",\n                children: t.viewDocument\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true)]\n        }, rfp._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pagination\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          children: t.prev\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"active\",\n          children: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: t.next\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 9\n  }, this);\n};\n_s(BrowseRFPs, \"IzwZrw3jmlIqblu7+rUYxMsNBU8=\", false, function () {\n  return [useLanguage];\n});\n_c = BrowseRFPs;\nexport default BrowseRFPs;\nvar _c;\n$RefreshReg$(_c, \"BrowseRFPs\");","map":{"version":3,"names":["React","useState","useEffect","Link","useLanguage","translations","jsxDEV","_jsxDEV","Fragment","_Fragment","BrowseRFPs","_s","language","t","rfps","setRfps","loading","setLoading","error","setError","activeFilter","setActiveFilter","sortKey","searchTerm","setSearchTerm","editingRfp","setEditingRfp","editForm","setEditForm","loadRfps","tab","sort","url","URL","searchParams","set","res","fetch","items","json","err","message","handleSearchChange","event","target","value","handleDeleteRfp","rfpId","window","confirm","console","log","response","method","headers","status","contentType","get","includes","responseText","text","Error","substring","data","ok","alert","handleEditRfp","rfp","_id","projectName","productSummary","deadline","Date","toISOString","split","durationDays","handleSaveRfp","body","JSON","stringify","handleCancelEdit","handleEditFormChange","field","prev","testConnection","getResponse","getContentType","getResponseText","getData","filteredRfps","filter","searchTermLower","toLowerCase","matchesSearch","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","searchPlaceholder","onChange","onClick","recentlyUploaded","deadlineCompleted","extendedRFPs","map","e","rows","min","productRequirementSummary","keyInfo","toLocaleDateString","month","day","year","projectDuration","open","fileUrl","viewDocument","next","_c","$RefreshReg$"],"sources":["C:/Users/HP - PC/Documents/rfp_tec/rpf_website_Tec/metro_/src/Browserfp.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './Browserfp.css';\r\nimport { useLanguage } from './LanguageContext';\r\nimport { translations } from './translations';\r\n\r\nconst BrowseRFPs = () => {\r\n    const { language } = useLanguage();\r\n    const t = translations[language];\r\n    const [rfps, setRfps] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [activeFilter, setActiveFilter] = useState('recent');\r\n    const [sortKey] = useState('uploadedAt');\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [editingRfp, setEditingRfp] = useState(null);\r\n    const [editForm, setEditForm] = useState({});\r\n\r\n    const loadRfps = async (tab = \"recent\", sort = \"uploadedAt\") => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const url = new URL(\"http://localhost:4000/api/rfps\");\r\n            url.searchParams.set(\"tab\", tab);\r\n            url.searchParams.set(\"sort\", sort);\r\n            const res = await fetch(url);\r\n            const items = await res.json();\r\n            setRfps(items);\r\n        } catch (err) {\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadRfps(activeFilter, sortKey);\r\n    }, [activeFilter, sortKey]);\r\n\r\n    const handleSearchChange = (event) => {\r\n        setSearchTerm(event.target.value);\r\n    };\r\n\r\n    const handleDeleteRfp = async (rfpId) => {\r\n        if (!window.confirm('Are you sure you want to delete this RFP?')) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            console.log('Attempting to delete RFP with ID:', rfpId);\r\n            const response = await fetch(`http://localhost:4000/api/rfps/${rfpId}`, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                }\r\n            });\r\n\r\n            console.log('Response status:', response.status);\r\n            console.log('Response headers:', response.headers);\r\n\r\n            // Check if response is JSON before parsing\r\n            const contentType = response.headers.get('content-type');\r\n            if (!contentType || !contentType.includes('application/json')) {\r\n                const responseText = await response.text();\r\n                console.log('Response is not JSON:', responseText);\r\n                throw new Error(`Server returned non-JSON response. Status: ${response.status}, Content-Type: ${contentType}. Response: ${responseText.substring(0, 200)}...`);\r\n            }\r\n\r\n            const data = await response.json();\r\n            console.log('Response data:', data);\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to delete RFP');\r\n            }\r\n\r\n            // Refresh the RFP list\r\n            loadRfps(activeFilter, sortKey);\r\n        } catch (error) {\r\n            console.error('Error deleting RFP:', error);\r\n            alert(`Failed to delete RFP: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    const handleEditRfp = (rfp) => {\r\n        setEditingRfp(rfp._id);\r\n        setEditForm({\r\n            projectName: rfp.projectName,\r\n            productSummary: rfp.productSummary,\r\n            deadline: new Date(rfp.deadline).toISOString().split('T')[0],\r\n            durationDays: rfp.durationDays,\r\n            status: rfp.status\r\n        });\r\n    };\r\n\r\n    const handleSaveRfp = async (rfpId) => {\r\n        try {\r\n            const response = await fetch(`http://localhost:4000/api/rfps/${rfpId}`, {\r\n                method: 'PUT',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(editForm)\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to update RFP');\r\n            }\r\n\r\n            // Refresh the RFP list\r\n            loadRfps(activeFilter, sortKey);\r\n            setEditingRfp(null);\r\n            setEditForm({});\r\n        } catch (error) {\r\n            console.error('Error updating RFP:', error);\r\n            alert(`Failed to update RFP: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    const handleCancelEdit = () => {\r\n        setEditingRfp(null);\r\n        setEditForm({});\r\n    };\r\n\r\n    const handleEditFormChange = (field, value) => {\r\n        setEditForm(prev => ({\r\n            ...prev,\r\n            [field]: value\r\n        }));\r\n    };\r\n\r\n    const testConnection = async () => {\r\n        try {\r\n            console.log('Testing connection...');\r\n            \r\n            // First test a simple GET request\r\n            console.log('Testing GET /health...');\r\n            const getResponse = await fetch('http://localhost:4000/health', {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                }\r\n            });\r\n            \r\n            console.log('GET response status:', getResponse.status);\r\n            console.log('GET response headers:', getResponse.headers);\r\n            \r\n            const getContentType = getResponse.headers.get('content-type');\r\n            if (!getContentType || !getContentType.includes('application/json')) {\r\n                const getResponseText = await getResponse.text();\r\n                console.log('GET response is not JSON:', getResponseText);\r\n                throw new Error(`GET request failed. Status: ${getResponse.status}, Content-Type: ${getContentType}. Response: ${getResponseText.substring(0, 200)}...`);\r\n            }\r\n            \r\n            const getData = await getResponse.json();\r\n            console.log('GET response data:', getData);\r\n            \r\n            // Now test the DELETE request\r\n            console.log('Testing DELETE /test-delete/123...');\r\n            const response = await fetch('http://localhost:4000/test-delete/123', {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                }\r\n            });\r\n            \r\n            console.log('Test response status:', response.status);\r\n            const data = await response.json();\r\n            console.log('Test response data:', data);\r\n            alert('Connection test successful! Check console for details.');\r\n        } catch (error) {\r\n            console.error('Test connection failed:', error);\r\n            alert(`Test connection failed: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    const filteredRfps = rfps.filter(rfp => {\r\n        const searchTermLower = searchTerm.toLowerCase();\r\n        const matchesSearch = searchTerm === '' ||\r\n                              rfp.projectName.toLowerCase().includes(searchTermLower) ||\r\n                              rfp.productSummary.toLowerCase().includes(searchTermLower) ||\r\n                              rfp.status.toLowerCase().includes(searchTermLower);\r\n        return matchesSearch;\r\n    });\r\n\r\n    return (\r\n        <div className=\"browse-rfp-app\">\r\n            <main className=\"browse-main\">\r\n                <div className=\"filter-controls\">\r\n                    <div className=\"search-bar\">\r\n                        <i className=\"fas fa-search\"></i>\r\n                        <input type=\"text\" placeholder={t.searchPlaceholder} value={searchTerm} onChange={handleSearchChange} />\r\n                    </div>\r\n                    <div className=\"filter-tabs\">\r\n                        <button onClick={() => setActiveFilter('recent')} className={activeFilter === 'recent' ? 'active' : ''}>{t.recentlyUploaded}</button>\r\n                        <button onClick={() => setActiveFilter('completed')} className={activeFilter === 'completed' ? 'active' : ''}>{t.deadlineCompleted}</button>\r\n                        <button onClick={() => setActiveFilter('extended')} className={activeFilter === 'extended' ? 'active' : ''}>{t.extendedRFPs}</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"rfp-grid\">\r\n                    {loading && <p>Loading...</p>}\r\n                    {error && <p>Error: {error}</p>}\r\n                    {!loading && !error && filteredRfps.map(rfp => (\r\n                        <div key={rfp._id} className={`rfp-card ${rfp.status.toLowerCase()}`}>\r\n                            <div className=\"card-header\">\r\n                                <button \r\n                                    onClick={() => handleEditRfp(rfp)}\r\n                                    className=\"edit-btn-header\"\r\n                                >\r\n                                    Edit\r\n                                </button>\r\n                                <span>{t.projectName}</span>\r\n                                <div className=\"header-right\">\r\n                                    <span className={`status-badge ${rfp.status.toLowerCase()}`}>{rfp.status}</span>\r\n                                    <button \r\n                                        onClick={() => handleDeleteRfp(rfp._id)}\r\n                                        className=\"delete-btn-header\"\r\n                                    >\r\n                                        Delete\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            {editingRfp === rfp._id ? (\r\n                                <div className=\"edit-mode\">\r\n                                    <div className=\"form-group\">\r\n                                        <label>Project Name:</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={editForm.projectName}\r\n                                            onChange={(e) => handleEditFormChange('projectName', e.target.value)}\r\n                                            className=\"edit-input\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"form-group\">\r\n                                        <label>Product Summary:</label>\r\n                                        <textarea\r\n                                            value={editForm.productSummary}\r\n                                            onChange={(e) => handleEditFormChange('productSummary', e.target.value)}\r\n                                            className=\"edit-textarea\"\r\n                                            rows=\"3\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"form-row\">\r\n                                        <div className=\"form-group\">\r\n                                            <label>Deadline:</label>\r\n                                            <input\r\n                                                type=\"date\"\r\n                                                value={editForm.deadline}\r\n                                                onChange={(e) => handleEditFormChange('deadline', e.target.value)}\r\n                                                className=\"edit-input\"\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"form-group\">\r\n                                            <label>Duration (days):</label>\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                value={editForm.durationDays}\r\n                                                onChange={(e) => handleEditFormChange('durationDays', e.target.value)}\r\n                                                className=\"edit-input\"\r\n                                                min=\"1\"\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"form-group\">\r\n                                            <label>Status:</label>\r\n                                            <select\r\n                                                value={editForm.status}\r\n                                                onChange={(e) => handleEditFormChange('status', e.target.value)}\r\n                                                className=\"edit-select\"\r\n                                            >\r\n                                                <option value=\"open\">Open</option>\r\n                                                <option value=\"extended\">Extended</option>\r\n                                                <option value=\"closed\">Closed</option>\r\n                                            </select>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"edit-actions\">\r\n                                        <button\r\n                                            onClick={() => handleSaveRfp(rfp._id)}\r\n                                            className=\"save-btn\"\r\n                                        >\r\n                                            Save\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={handleCancelEdit}\r\n                                            className=\"cancel-btn\"\r\n                                        >\r\n                                            Cancel\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            ) : (\r\n                                <>\r\n                                    <h2>{rfp.projectName}</h2>\r\n                                    <div className=\"summary\">\r\n                                        <h3>{t.productRequirementSummary}</h3>\r\n                                        <p>{rfp.productSummary}</p>\r\n                                    </div>\r\n                                    <div className=\"key-info\">\r\n                                        <h3>{t.keyInfo}</h3>\r\n                                        <div className=\"info-grid\">\r\n                                            <div><span>Deadline: {new Date(rfp.deadline).toLocaleDateString('en-US', { \r\n                                                month: 'short', \r\n                                                day: 'numeric', \r\n                                                year: 'numeric' \r\n                                            })}</span></div>\r\n                                            <div><span>{t.projectDuration}:</span><strong>{rfp.durationDays} days</strong></div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"card-actions\">\r\n                                        <button \r\n                                            onClick={() => window.open(`http://localhost:4000${rfp.fileUrl}`, '_blank')}\r\n                                            className=\"preview-doc\"\r\n                                        >\r\n                                            {t.viewDocument}\r\n                                        </button>\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                <div className=\"pagination\">\r\n                    <button>{t.prev}</button>\r\n                    <button className=\"active\">1</button>\r\n                    <button>2</button>\r\n                    <button>3</button>\r\n                    <span>...</span>\r\n                    <button>{t.next}</button>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BrowseRFPs;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}