{"ast":null,"code":"class LocalStorageService {\n  constructor() {\n    this.storageKey = 'rfp_data';\n    this.fileStorageKey = 'rfp_files';\n  }\n\n  // Get all RFPs from local storage\n  getRFPs() {\n    try {\n      const data = localStorage.getItem(this.storageKey);\n      return data ? JSON.parse(data) : [];\n    } catch (error) {\n      console.error('Error reading from localStorage:', error);\n      return [];\n    }\n  }\n\n  // Convert file to base64 and save\n  fileToBase64(file) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = error => reject(error);\n    });\n  }\n\n  // Save RFP to local storage\n  async saveRFP(rfpData) {\n    try {\n      const rfps = this.getRFPs();\n      let fileData = null;\n      let fileName = null;\n      let fileSize = null;\n      if (rfpData.file) {\n        // Convert file to base64 for storage\n        fileData = await this.fileToBase64(rfpData.file);\n        fileName = rfpData.file.name;\n        fileSize = rfpData.file.size;\n      }\n      const newRFP = {\n        ...rfpData,\n        _id: Date.now().toString(),\n        // Generate unique ID\n        uploadedAt: new Date().toISOString(),\n        fileData: fileData,\n        // Store base64 data\n        fileName: fileName,\n        fileSize: fileSize\n      };\n\n      // Remove the actual file object before storing\n      delete newRFP.file;\n      rfps.push(newRFP);\n      localStorage.setItem(this.storageKey, JSON.stringify(rfps));\n      return newRFP;\n    } catch (error) {\n      console.error('Error saving to localStorage:', error);\n      throw error;\n    }\n  }\n\n  // Get file URL from base64 data\n  getFileUrl(base64Data) {\n    if (!base64Data) return null;\n\n    // Convert base64 back to blob URL for immediate loading\n    try {\n      const byteCharacters = atob(base64Data.split(',')[1]);\n      const byteNumbers = new Array(byteCharacters.length);\n      for (let i = 0; i < byteCharacters.length; i++) {\n        byteNumbers[i] = byteCharacters.charCodeAt(i);\n      }\n      const byteArray = new Uint8Array(byteNumbers);\n      const blob = new Blob([byteArray], {\n        type: 'application/pdf'\n      });\n      return URL.createObjectURL(blob);\n    } catch (error) {\n      console.error('Error creating blob URL:', error);\n      return base64Data; // Fallback to base64\n    }\n  }\n\n  // Get download URL for file\n  getDownloadUrl(base64Data, fileName) {\n    if (!base64Data) return null;\n    try {\n      const byteCharacters = atob(base64Data.split(',')[1]);\n      const byteNumbers = new Array(byteCharacters.length);\n      for (let i = 0; i < byteCharacters.length; i++) {\n        byteNumbers[i] = byteCharacters.charCodeAt(i);\n      }\n      const byteArray = new Uint8Array(byteNumbers);\n      const blob = new Blob([byteArray], {\n        type: 'application/pdf'\n      });\n      return URL.createObjectURL(blob);\n    } catch (error) {\n      console.error('Error creating download URL:', error);\n      return base64Data; // Fallback to base64\n    }\n  }\n\n  // Update RFP in local storage\n  updateRFP(rfpId, updateData) {\n    try {\n      const rfps = this.getRFPs();\n      const index = rfps.findIndex(rfp => rfp._id === rfpId);\n      if (index !== -1) {\n        rfps[index] = {\n          ...rfps[index],\n          ...updateData\n        };\n        localStorage.setItem(this.storageKey, JSON.stringify(rfps));\n        return rfps[index];\n      }\n      throw new Error('RFP not found');\n    } catch (error) {\n      console.error('Error updating RFP:', error);\n      throw error;\n    }\n  }\n\n  // Delete RFP from local storage\n  deleteRFP(rfpId) {\n    try {\n      const rfps = this.getRFPs();\n      const filteredRfps = rfps.filter(rfp => rfp._id !== rfpId);\n      if (filteredRfps.length < rfps.length) {\n        localStorage.setItem(this.storageKey, JSON.stringify(filteredRfps));\n        return true;\n      }\n      throw new Error('RFP not found');\n    } catch (error) {\n      console.error('Error deleting RFP:', error);\n      throw error;\n    }\n  }\n\n  // Get RFPs filtered by status\n  getRFPsByStatus(status) {\n    const rfps = this.getRFPs();\n    const now = new Date();\n    return rfps.filter(rfp => {\n      const deadline = new Date(rfp.deadline);\n      switch (status) {\n        case 'recent':\n          return true;\n        // All recent RFPs\n        case 'completed':\n          return deadline < now;\n        case 'extended':\n          return rfp.status === 'extended';\n        default:\n          return true;\n      }\n    });\n  }\n\n  // Search RFPs\n  searchRFPs(searchTerm) {\n    const rfps = this.getRFPs();\n    const lowerSearchTerm = searchTerm.toLowerCase();\n    return rfps.filter(rfp => rfp.projectName.toLowerCase().includes(lowerSearchTerm) || rfp.productSummary.toLowerCase().includes(lowerSearchTerm) || rfp.status.toLowerCase().includes(lowerSearchTerm));\n  }\n}\nexport default new LocalStorageService();","map":{"version":3,"names":["LocalStorageService","constructor","storageKey","fileStorageKey","getRFPs","data","localStorage","getItem","JSON","parse","error","console","fileToBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","saveRFP","rfpData","rfps","fileData","fileName","fileSize","name","size","newRFP","_id","Date","now","toString","uploadedAt","toISOString","push","setItem","stringify","getFileUrl","base64Data","byteCharacters","atob","split","byteNumbers","Array","length","i","charCodeAt","byteArray","Uint8Array","blob","Blob","type","URL","createObjectURL","getDownloadUrl","updateRFP","rfpId","updateData","index","findIndex","rfp","Error","deleteRFP","filteredRfps","filter","getRFPsByStatus","status","deadline","searchRFPs","searchTerm","lowerSearchTerm","toLowerCase","projectName","includes","productSummary"],"sources":["C:/Users/HP - PC/Documents/rfp_tec/rpf_website_Tec/metro_/src/localStorageService.js"],"sourcesContent":["class LocalStorageService {\r\n  constructor() {\r\n    this.storageKey = 'rfp_data';\r\n    this.fileStorageKey = 'rfp_files';\r\n  }\r\n\r\n  // Get all RFPs from local storage\r\n  getRFPs() {\r\n    try {\r\n      const data = localStorage.getItem(this.storageKey);\r\n      return data ? JSON.parse(data) : [];\r\n    } catch (error) {\r\n      console.error('Error reading from localStorage:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  // Convert file to base64 and save\r\n  fileToBase64(file) {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => resolve(reader.result);\r\n      reader.onerror = error => reject(error);\r\n    });\r\n  }\r\n\r\n  // Save RFP to local storage\r\n  async saveRFP(rfpData) {\r\n    try {\r\n      const rfps = this.getRFPs();\r\n      let fileData = null;\r\n      let fileName = null;\r\n      let fileSize = null;\r\n\r\n      if (rfpData.file) {\r\n        // Convert file to base64 for storage\r\n        fileData = await this.fileToBase64(rfpData.file);\r\n        fileName = rfpData.file.name;\r\n        fileSize = rfpData.file.size;\r\n      }\r\n\r\n      const newRFP = {\r\n        ...rfpData,\r\n        _id: Date.now().toString(), // Generate unique ID\r\n        uploadedAt: new Date().toISOString(),\r\n        fileData: fileData, // Store base64 data\r\n        fileName: fileName,\r\n        fileSize: fileSize\r\n      };\r\n      \r\n      // Remove the actual file object before storing\r\n      delete newRFP.file;\r\n      \r\n      rfps.push(newRFP);\r\n      localStorage.setItem(this.storageKey, JSON.stringify(rfps));\r\n      return newRFP;\r\n    } catch (error) {\r\n      console.error('Error saving to localStorage:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Get file URL from base64 data\r\n  getFileUrl(base64Data) {\r\n    if (!base64Data) return null;\r\n    \r\n    // Convert base64 back to blob URL for immediate loading\r\n    try {\r\n      const byteCharacters = atob(base64Data.split(',')[1]);\r\n      const byteNumbers = new Array(byteCharacters.length);\r\n      for (let i = 0; i < byteCharacters.length; i++) {\r\n        byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n      }\r\n      const byteArray = new Uint8Array(byteNumbers);\r\n      const blob = new Blob([byteArray], { type: 'application/pdf' });\r\n      return URL.createObjectURL(blob);\r\n    } catch (error) {\r\n      console.error('Error creating blob URL:', error);\r\n      return base64Data; // Fallback to base64\r\n    }\r\n  }\r\n\r\n  // Get download URL for file\r\n  getDownloadUrl(base64Data, fileName) {\r\n    if (!base64Data) return null;\r\n    \r\n    try {\r\n      const byteCharacters = atob(base64Data.split(',')[1]);\r\n      const byteNumbers = new Array(byteCharacters.length);\r\n      for (let i = 0; i < byteCharacters.length; i++) {\r\n        byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n      }\r\n      const byteArray = new Uint8Array(byteNumbers);\r\n      const blob = new Blob([byteArray], { type: 'application/pdf' });\r\n      return URL.createObjectURL(blob);\r\n    } catch (error) {\r\n      console.error('Error creating download URL:', error);\r\n      return base64Data; // Fallback to base64\r\n    }\r\n  }\r\n\r\n  // Update RFP in local storage\r\n  updateRFP(rfpId, updateData) {\r\n    try {\r\n      const rfps = this.getRFPs();\r\n      const index = rfps.findIndex(rfp => rfp._id === rfpId);\r\n      \r\n      if (index !== -1) {\r\n        rfps[index] = { ...rfps[index], ...updateData };\r\n        localStorage.setItem(this.storageKey, JSON.stringify(rfps));\r\n        return rfps[index];\r\n      }\r\n      throw new Error('RFP not found');\r\n    } catch (error) {\r\n      console.error('Error updating RFP:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Delete RFP from local storage\r\n  deleteRFP(rfpId) {\r\n    try {\r\n      const rfps = this.getRFPs();\r\n      const filteredRfps = rfps.filter(rfp => rfp._id !== rfpId);\r\n      \r\n      if (filteredRfps.length < rfps.length) {\r\n        localStorage.setItem(this.storageKey, JSON.stringify(filteredRfps));\r\n        return true;\r\n      }\r\n      throw new Error('RFP not found');\r\n    } catch (error) {\r\n      console.error('Error deleting RFP:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Get RFPs filtered by status\r\n  getRFPsByStatus(status) {\r\n    const rfps = this.getRFPs();\r\n    const now = new Date();\r\n    \r\n    return rfps.filter(rfp => {\r\n      const deadline = new Date(rfp.deadline);\r\n      \r\n      switch (status) {\r\n        case 'recent':\r\n          return true; // All recent RFPs\r\n        case 'completed':\r\n          return deadline < now;\r\n        case 'extended':\r\n          return rfp.status === 'extended';\r\n        default:\r\n          return true;\r\n      }\r\n    });\r\n  }\r\n\r\n  // Search RFPs\r\n  searchRFPs(searchTerm) {\r\n    const rfps = this.getRFPs();\r\n    const lowerSearchTerm = searchTerm.toLowerCase();\r\n    \r\n    return rfps.filter(rfp => \r\n      rfp.projectName.toLowerCase().includes(lowerSearchTerm) ||\r\n      rfp.productSummary.toLowerCase().includes(lowerSearchTerm) ||\r\n      rfp.status.toLowerCase().includes(lowerSearchTerm)\r\n    );\r\n  }\r\n}\r\n\r\nexport default new LocalStorageService();\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}