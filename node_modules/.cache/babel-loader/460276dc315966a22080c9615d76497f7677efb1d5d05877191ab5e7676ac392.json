{"ast":null,"code":"import _objectSpread from\"C:/Users/HP - PC/Documents/rfp_tec/rpf_website_Tec/metro_/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";class LocalStorageService{constructor(){this.storageKey='rfp_data';this.fileStorageKey='rfp_files';}// Get all RFPs from local storage\ngetRFPs(){try{const data=localStorage.getItem(this.storageKey);return data?JSON.parse(data):[];}catch(error){console.error('Error reading from localStorage:',error);return[];}}// Convert file to base64 and save\nfileToBase64(file){return new Promise((resolve,reject)=>{const reader=new FileReader();reader.readAsDataURL(file);reader.onload=()=>resolve(reader.result);reader.onerror=error=>reject(error);});}// Save RFP to local storage\nasync saveRFP(rfpData){try{const rfps=this.getRFPs();let fileData=null;let fileName=null;let fileSize=null;if(rfpData.file){// Convert file to base64 for storage\nfileData=await this.fileToBase64(rfpData.file);fileName=rfpData.file.name;fileSize=rfpData.file.size;}const newRFP=_objectSpread(_objectSpread({},rfpData),{},{_id:Date.now().toString(),// Generate unique ID\nuploadedAt:new Date().toISOString(),fileData:fileData,// Store base64 data\nfileName:fileName,fileSize:fileSize});// Remove the actual file object before storing\ndelete newRFP.file;rfps.push(newRFP);localStorage.setItem(this.storageKey,JSON.stringify(rfps));return newRFP;}catch(error){console.error('Error saving to localStorage:',error);throw error;}}// Get file URL from base64 data\ngetFileUrl(base64Data){if(!base64Data)return null;// Convert base64 back to blob URL for immediate loading\ntry{const byteCharacters=atob(base64Data.split(',')[1]);const byteNumbers=new Array(byteCharacters.length);for(let i=0;i<byteCharacters.length;i++){byteNumbers[i]=byteCharacters.charCodeAt(i);}const byteArray=new Uint8Array(byteNumbers);const blob=new Blob([byteArray],{type:'application/pdf'});return URL.createObjectURL(blob);}catch(error){console.error('Error creating blob URL:',error);return base64Data;// Fallback to base64\n}}// Get download URL for file\ngetDownloadUrl(base64Data,fileName){if(!base64Data)return null;try{const byteCharacters=atob(base64Data.split(',')[1]);const byteNumbers=new Array(byteCharacters.length);for(let i=0;i<byteCharacters.length;i++){byteNumbers[i]=byteCharacters.charCodeAt(i);}const byteArray=new Uint8Array(byteNumbers);const blob=new Blob([byteArray],{type:'application/pdf'});return URL.createObjectURL(blob);}catch(error){console.error('Error creating download URL:',error);return base64Data;// Fallback to base64\n}}// Update RFP in local storage\nupdateRFP(rfpId,updateData){try{const rfps=this.getRFPs();const index=rfps.findIndex(rfp=>rfp._id===rfpId);if(index!==-1){rfps[index]=_objectSpread(_objectSpread({},rfps[index]),updateData);localStorage.setItem(this.storageKey,JSON.stringify(rfps));return rfps[index];}throw new Error('RFP not found');}catch(error){console.error('Error updating RFP:',error);throw error;}}// Delete RFP from local storage\ndeleteRFP(rfpId){try{const rfps=this.getRFPs();const filteredRfps=rfps.filter(rfp=>rfp._id!==rfpId);if(filteredRfps.length<rfps.length){localStorage.setItem(this.storageKey,JSON.stringify(filteredRfps));return true;}throw new Error('RFP not found');}catch(error){console.error('Error deleting RFP:',error);throw error;}}// Get RFPs filtered by status\ngetRFPsByStatus(status){const rfps=this.getRFPs();const now=new Date();return rfps.filter(rfp=>{const deadline=new Date(rfp.deadline);switch(status){case'recent':return true;// All recent RFPs\ncase'completed':return deadline<now;case'extended':return rfp.status==='extended';default:return true;}});}// Search RFPs\nsearchRFPs(searchTerm){const rfps=this.getRFPs();const lowerSearchTerm=searchTerm.toLowerCase();return rfps.filter(rfp=>rfp.projectName.toLowerCase().includes(lowerSearchTerm)||rfp.productSummary.toLowerCase().includes(lowerSearchTerm)||rfp.status.toLowerCase().includes(lowerSearchTerm));}}export default new LocalStorageService();","map":{"version":3,"names":["LocalStorageService","constructor","storageKey","fileStorageKey","getRFPs","data","localStorage","getItem","JSON","parse","error","console","fileToBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","saveRFP","rfpData","rfps","fileData","fileName","fileSize","name","size","newRFP","_objectSpread","_id","Date","now","toString","uploadedAt","toISOString","push","setItem","stringify","getFileUrl","base64Data","byteCharacters","atob","split","byteNumbers","Array","length","i","charCodeAt","byteArray","Uint8Array","blob","Blob","type","URL","createObjectURL","getDownloadUrl","updateRFP","rfpId","updateData","index","findIndex","rfp","Error","deleteRFP","filteredRfps","filter","getRFPsByStatus","status","deadline","searchRFPs","searchTerm","lowerSearchTerm","toLowerCase","projectName","includes","productSummary"],"sources":["C:/Users/HP - PC/Documents/rfp_tec/rpf_website_Tec/metro_/src/localStorageService.js"],"sourcesContent":["class LocalStorageService {\r\n  constructor() {\r\n    this.storageKey = 'rfp_data';\r\n    this.fileStorageKey = 'rfp_files';\r\n  }\r\n\r\n  // Get all RFPs from local storage\r\n  getRFPs() {\r\n    try {\r\n      const data = localStorage.getItem(this.storageKey);\r\n      return data ? JSON.parse(data) : [];\r\n    } catch (error) {\r\n      console.error('Error reading from localStorage:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  // Convert file to base64 and save\r\n  fileToBase64(file) {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => resolve(reader.result);\r\n      reader.onerror = error => reject(error);\r\n    });\r\n  }\r\n\r\n  // Save RFP to local storage\r\n  async saveRFP(rfpData) {\r\n    try {\r\n      const rfps = this.getRFPs();\r\n      let fileData = null;\r\n      let fileName = null;\r\n      let fileSize = null;\r\n\r\n      if (rfpData.file) {\r\n        // Convert file to base64 for storage\r\n        fileData = await this.fileToBase64(rfpData.file);\r\n        fileName = rfpData.file.name;\r\n        fileSize = rfpData.file.size;\r\n      }\r\n\r\n      const newRFP = {\r\n        ...rfpData,\r\n        _id: Date.now().toString(), // Generate unique ID\r\n        uploadedAt: new Date().toISOString(),\r\n        fileData: fileData, // Store base64 data\r\n        fileName: fileName,\r\n        fileSize: fileSize\r\n      };\r\n      \r\n      // Remove the actual file object before storing\r\n      delete newRFP.file;\r\n      \r\n      rfps.push(newRFP);\r\n      localStorage.setItem(this.storageKey, JSON.stringify(rfps));\r\n      return newRFP;\r\n    } catch (error) {\r\n      console.error('Error saving to localStorage:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Get file URL from base64 data\r\n  getFileUrl(base64Data) {\r\n    if (!base64Data) return null;\r\n    \r\n    // Convert base64 back to blob URL for immediate loading\r\n    try {\r\n      const byteCharacters = atob(base64Data.split(',')[1]);\r\n      const byteNumbers = new Array(byteCharacters.length);\r\n      for (let i = 0; i < byteCharacters.length; i++) {\r\n        byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n      }\r\n      const byteArray = new Uint8Array(byteNumbers);\r\n      const blob = new Blob([byteArray], { type: 'application/pdf' });\r\n      return URL.createObjectURL(blob);\r\n    } catch (error) {\r\n      console.error('Error creating blob URL:', error);\r\n      return base64Data; // Fallback to base64\r\n    }\r\n  }\r\n\r\n  // Get download URL for file\r\n  getDownloadUrl(base64Data, fileName) {\r\n    if (!base64Data) return null;\r\n    \r\n    try {\r\n      const byteCharacters = atob(base64Data.split(',')[1]);\r\n      const byteNumbers = new Array(byteCharacters.length);\r\n      for (let i = 0; i < byteCharacters.length; i++) {\r\n        byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n      }\r\n      const byteArray = new Uint8Array(byteNumbers);\r\n      const blob = new Blob([byteArray], { type: 'application/pdf' });\r\n      return URL.createObjectURL(blob);\r\n    } catch (error) {\r\n      console.error('Error creating download URL:', error);\r\n      return base64Data; // Fallback to base64\r\n    }\r\n  }\r\n\r\n  // Update RFP in local storage\r\n  updateRFP(rfpId, updateData) {\r\n    try {\r\n      const rfps = this.getRFPs();\r\n      const index = rfps.findIndex(rfp => rfp._id === rfpId);\r\n      \r\n      if (index !== -1) {\r\n        rfps[index] = { ...rfps[index], ...updateData };\r\n        localStorage.setItem(this.storageKey, JSON.stringify(rfps));\r\n        return rfps[index];\r\n      }\r\n      throw new Error('RFP not found');\r\n    } catch (error) {\r\n      console.error('Error updating RFP:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Delete RFP from local storage\r\n  deleteRFP(rfpId) {\r\n    try {\r\n      const rfps = this.getRFPs();\r\n      const filteredRfps = rfps.filter(rfp => rfp._id !== rfpId);\r\n      \r\n      if (filteredRfps.length < rfps.length) {\r\n        localStorage.setItem(this.storageKey, JSON.stringify(filteredRfps));\r\n        return true;\r\n      }\r\n      throw new Error('RFP not found');\r\n    } catch (error) {\r\n      console.error('Error deleting RFP:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Get RFPs filtered by status\r\n  getRFPsByStatus(status) {\r\n    const rfps = this.getRFPs();\r\n    const now = new Date();\r\n    \r\n    return rfps.filter(rfp => {\r\n      const deadline = new Date(rfp.deadline);\r\n      \r\n      switch (status) {\r\n        case 'recent':\r\n          return true; // All recent RFPs\r\n        case 'completed':\r\n          return deadline < now;\r\n        case 'extended':\r\n          return rfp.status === 'extended';\r\n        default:\r\n          return true;\r\n      }\r\n    });\r\n  }\r\n\r\n  // Search RFPs\r\n  searchRFPs(searchTerm) {\r\n    const rfps = this.getRFPs();\r\n    const lowerSearchTerm = searchTerm.toLowerCase();\r\n    \r\n    return rfps.filter(rfp => \r\n      rfp.projectName.toLowerCase().includes(lowerSearchTerm) ||\r\n      rfp.productSummary.toLowerCase().includes(lowerSearchTerm) ||\r\n      rfp.status.toLowerCase().includes(lowerSearchTerm)\r\n    );\r\n  }\r\n}\r\n\r\nexport default new LocalStorageService();\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}